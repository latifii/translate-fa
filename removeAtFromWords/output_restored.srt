1
00:00:00,300 --> 00:00:02,850
‫پس بیایید این برنامه را با اطمینان کامل به پایان برسانیم

2
00:00:02,850 --> 00:00:06,513
‫که وقتی سبد خرید را باز می کنیم، اقلام سبد را نیز در اینجا نشان می دهیم.

3
00:00:08,280 --> 00:00:12,540
‫اکنون برای آن باید به فایل tsx CartItems برویم

4
00:00:12,540 --> 00:00:15,180
‫زیرا این جایی است که اقلام سبد خرید در آن وجود دارد

5
00:00:15,180 --> 00:00:16,082
‫باید خروجی باشد.

6
00:00:16,980 --> 00:00:20,070
‫و در واقع، قبلاً کدی در اینجا وجود دارد،

7
00:00:20,070 --> 00:00:22,860
‫که در حال حاضر فقط نظر داده شده است

8
00:00:22,860 --> 00:00:25,050
‫و باید کمی اصلاح شود

9
00:00:25,050 --> 00:00:27,870
‫باید کمی ویرایش شود

10
00:00:27,870 --> 00:00:30,570
‫از همه مهمتر در اینجا،

11
00:00:30,570 --> 00:00:34,600
‫ما باید با فراخوانی useCartSelector نیز شروع کنیم

12
00:00:36,780 --> 00:00:38,433
‫برای دریافت اقلام سبد خرید ما

13
00:00:39,270 --> 00:00:40,950
‫همانطور که در آخرین سخنرانی ذکر شد،

14
00:00:40,950 --> 00:00:44,970
‫در اینجا باید یک function را برای استفاده از cartSelector ارسال کنیم

15
00:00:44,970 --> 00:00:48,570
‫و ما به طور خودکار جدیدترین state snapshot را دریافت خواهیم کرد

16
00:00:48,570 --> 00:00:51,270
‫و سپس می توانیم به قطعه سبد خرید دسترسی پیدا کنیم

17
00:00:51,270 --> 00:00:52,900
‫و سپس موارد وجود دارد

18
00:00:54,270 --> 00:00:56,733
‫و سپس اقلام سبد خرید را به ما می دهد.

19
00:00:58,890 --> 00:01:01,530
‫با این اقلام سبد خرید که در اینجا واکشی می شوند،

20
00:01:01,530 --> 00:01:04,742
‫ما می توانیم در این کد نظر بدهیم،

21
00:01:07,530 --> 00:01:12,010
‫از شر این کامنت ها در اینجا خلاص شوید

22
00:01:14,100 --> 00:01:17,280
‫و ما map از طریق اقلام سبد خرید اینجا.

23
00:01:17,280 --> 00:01:20,340
‫این کد از قبل وجود دارد
‫و باید به خوبی کار کند.

24
00:01:20,340 --> 00:01:24,060
‫من همچنین قیمت را در اینجا خروجی می‌دهم،

25
00:01:24,060 --> 00:01:27,480
‫title، id و
‫سپس اینجا برای این دکمه‌ها،

26
00:01:27,480 --> 00:01:31,830
‫سعی می‌کنم توابعی را
‫که وجود ندارند فراخوانی

27
00:01:31,830 --> 00:01:34,740
‫کنم و مقداری data را
‫به این توابع ارسال می‌کنم. دیدن.

28
00:01:34,740 --> 00:01:38,550
‫ایده کالایی که باید در سبد

29
00:01:38,550 --> 00:01:41,370
‫خرید حذف یا کاهش یابد و کل

30
00:01:41,370 --> 00:01:43,683
‫کالایی که باید اضافه یا اضافه شود.

31
00:01:45,210 --> 00:01:48,330
‫در اینجا یک قیمت کل قالب بندی شده

32
00:01:48,330 --> 00:01:49,683
‫نیز داریم که باید آن را اضافه کنیم.

33
00:01:50,580 --> 00:01:52,320
‫و من در واقع با آن شروع می

34
00:01:52,320 --> 00:01:55,140
‫کنم زیرا این نسبتاً ساده است.

35
00:01:55,140 --> 00:01:58,930
‫ما به سادگی می توانیم یک ثابت قیمت کل قالب بندی شده جدید ایجاد کنیم

36
00:01:59,850 --> 00:02:03,630
‫و value باید قیمت کل باشد

37
00:02:03,630 --> 00:02:06,990
‫از تمام اقلام سبد خرید طوری فرمت شده است که ما فقط

38
00:02:06,990 --> 00:02:09,240
‫دارای دو رقم اعشار

39
00:02:09,240 --> 00:02:14,240
‫بنابراین برای آن، من اول از همه قیمت کل خود را با رفتن به دست می‌آورم

40
00:02:14,827 --> 00:02:18,570
‫از طریق تمام اقلام سبد خرید با کمک روش reduce

41
00:02:18,570 --> 00:02:22,530
‫که در action در سخنرانی گذشته نیز دیدیم.

42
00:02:22,530 --> 00:02:26,190
‫این بار سعی نمی کنم کل مقدار را بدست بیاورم،

43
00:02:26,190 --> 00:02:27,573
‫اما قیمت کل

44
00:02:28,890 --> 00:02:31,023
‫اگرچه ایده کلی او همان است.

45
00:02:31,890 --> 00:02:35,550
‫ما یک value شروع صفر داریم و سپس می‌گیریم

46
00:02:35,550 --> 00:02:39,870
‫value فعلی و مورد در این function

47
00:02:39,870 --> 00:02:43,620
‫و بازگشت value مقدار  فعلی است

48
00:02:43,620 --> 00:02:48,620
‫به علاوه مورد.قیمت بار مورد.تعداد.

49
00:02:52,590 --> 00:02:55,710
‫و سپس می توانیم از این قیمت کل در اینجا استفاده کنیم

50
00:02:55,710 --> 00:03:00,710
‫toFixed 2 را روی آن فراخوانی کنید تا آن را به دو رقم اعشار محدود کنید.

51
00:03:03,240 --> 00:03:05,970
‫من همچنین می خواهم یک علامت دلار جلوی آن اضافه کنم

52
00:03:05,970 --> 00:03:09,843
‫بنابراین در اینجا من نیز چنین علامت دلاری را اضافه خواهم کرد.

53
00:03:11,730 --> 00:03:14,430
‫و با آن ما باید خلق کنیم

54
00:03:14,430 --> 00:03:16,953
‫و خروجی آن قیمت کل فرمت شده.

55
00:03:18,600 --> 00:03:20,950
‫البته اکنون به handleRemoveFromCart نیاز داریم

56
00:03:22,021 --> 00:03:24,570
‫و توابع handleAddToCart در اینجا عمل می کند

57
00:03:24,570 --> 00:03:26,343
‫برای خلاص شدن از شر این خطاها

58
00:03:27,510 --> 00:03:29,710
‫بنابراین من با handleAddToCart شروع می کنم

59
00:03:31,201 --> 00:03:32,850
‫و من یک function را اینجا اضافه خواهم کرد

60
00:03:32,850 --> 00:03:36,420
‫به عنوان یک function تو در تو در این سبد کالاها component

61
00:03:36,420 --> 00:03:39,603
‫همانطور که قبلاً بارها در این دوره انجام داده ایم.

62
00:03:41,610 --> 00:03:45,210
‫سپس یک آیتم به عنوان آرگومان دریافت می کند،

63
00:03:45,210 --> 00:03:46,380
‫به عنوان یک پارامتر،

64
00:03:46,380 --> 00:03:51,380
‫و آن کالا یک سبد خرید خواهد بود، همانطور که در پایین مشاهده می کنید.

65
00:03:54,180 --> 00:03:57,280
‫بنابراین type باید CartItem باشد

66
00:03:59,483 --> 00:04:02,310
‫و این یک type است که قبلا تعریف کردم

67
00:04:02,310 --> 00:04:04,653
‫در فایل cartSlice TS.

68
00:04:05,610 --> 00:04:08,640
‫در آنجا من چنین CartItem type دارم

69
00:04:08,640 --> 00:04:12,310
‫و بنابراین تنها کاری که باید انجام دهیم export آن است

70
00:04:13,170 --> 00:04:15,663
‫با افزودن کلمه کلیدی export در مقابل آن.

71
00:04:17,339 --> 00:04:19,500
‫و سپس دوباره در CartItems

72
00:04:19,500 --> 00:04:24,500
‫ما می توانیم به راحتی import آن را مانند این از cart-slice.ts.

73
00:04:32,010 --> 00:04:34,830
‫بنابراین این handleAddToCart function است.

74
00:04:34,830 --> 00:04:38,343
‫در این function، ما البته می‌خواهیم dispatch یک action داشته باشیم.

75
00:04:39,930 --> 00:04:44,400
‫بنابراین ما به این useCartDispatch hook نیاز

76
00:04:44,400 --> 00:04:46,983
‫داریم که از این فایل hooks نیز وارد شده است.

77
00:04:48,330 --> 00:04:51,273
‫و ما به action نیاز
‫داریم که باید ارسال شود.

78
00:04:52,200 --> 00:04:55,770
‫ما می‌توانیم import این actions را از فایل

79
00:04:55,770 --> 00:04:59,970
‫cart-slice ts، البته، زیرا در اینجاست که آنها را صادر می‌کنیم.

80
00:04:59,970 --> 00:05:03,360
‫من دقیقاً در مورد این عملکردهای

81
00:05:03,360 --> 00:05:04,443
‫خالق action صحبت می کنم.

82
00:05:06,660 --> 00:05:10,830
‫بنابراین در اینجا ما باید به import

83
00:05:10,830 --> 00:05:13,860
‫خالقان addToCart و removeFromCart

84
00:05:13,860 --> 00:05:15,123
‫action را وارد کنیم زیرا به هر دو نیاز داریم.

85
00:05:16,290 --> 00:05:19,680
‫و CartItem یک type است، به
‫هر حال، بنابراین ما می توانیم اضافه کنیم

86
00:05:19,680 --> 00:05:22,833
‫این حاشیه برای بهینه سازی واردات ما.

87
00:05:24,060 --> 00:05:26,200
‫در حال حاضر با تمام آن واردات اضافه شده است

88
00:05:27,419 --> 00:05:30,000
‫و وقتی useCartDispatch در اینجا فراخوانی می شود،

89
00:05:30,000 --> 00:05:34,290
‫ما یک dispatch function را از آن hook دریافت خواهیم کرد.

90
00:05:34,290 --> 00:05:36,510
‫و اکنون می توانیم از این function در اینجا استفاده کنیم

91
00:05:36,510 --> 00:05:38,793
‫در handleAddToCart function.

92
00:05:40,230 --> 00:05:43,770
‫و action object که باید ارسال شود

93
00:05:43,770 --> 00:05:45,450
‫ایجاد خواهد شد

94
00:05:45,450 --> 00:05:48,873
‫این addToCart action خالق function اینجاست.

95
00:05:50,070 --> 00:05:51,870
‫ما فقط آن را اجرا می کنیم.

96
00:05:51,870 --> 00:05:55,110
‫و سپس این در پایان یک object با id می‌خواهد،

97
00:05:55,110 --> 00:05:56,940
‫title و قیمت.

98
00:05:56,940 --> 00:05:59,080
‫بنابراین در پایان می توانیم آیتم خود را به اینجا منتقل کنیم

99
00:06:00,750 --> 00:06:04,410
‫زیرا این سبد خرید تمام آن اطلاعات را دارد.

100
00:06:04,410 --> 00:06:07,980
‫در واقع یک property نیز دارد که به آن نیازی نیست

101
00:06:07,980 --> 00:06:12,033
‫توسط addToCart، اما TypeScript هیچ مشکلی با آن در اینجا ندارد.

102
00:06:13,560 --> 00:06:17,520
‫بنابراین، اکنون می‌توانیم این function را نیز اضافه کنیم

103
00:06:17,520 --> 00:06:21,363
‫handleRemoveFromCart function مانند این.

104
00:06:22,920 --> 00:06:26,733
‫و در اینجا ما فقط آیتم id را دریافت می کنیم که از نوع string است.

105
00:06:27,660 --> 00:06:30,873
‫بنابراین در اینجا ما باید چنین id را بپذیریم.

106
00:06:32,820 --> 00:06:37,110
‫و سپس dispatch یکی دیگر از action که در آن استفاده می کنیم

107
00:06:37,110 --> 00:06:40,533
‫خالق removeFromCart action function.

108
00:06:41,820 --> 00:06:45,240
‫و این function یک آرگومان می خواهد

109
00:06:45,240 --> 00:06:47,043
‫که باید از نوع string باشد.

110
00:06:48,420 --> 00:06:51,300
‫بنابراین به سادگی id گذشت

111
00:06:51,300 --> 00:06:52,773
‫برای حذف از سبد خرید

112
00:06:54,120 --> 00:06:57,540
‫و این باید به طور کلی همه باشد.

113
00:06:57,540 --> 00:07:01,320
‫با این حال، من هنوز هم می خواهم کد JSX را در اینجا تنظیم کنم

114
00:07:01,320 --> 00:07:04,840
‫و برای مثال فقط این پیام را در اینجا خروجی بگیرید

115
00:07:05,982 --> 00:07:08,073
‫اگر واقعاً هیچ کالایی در سبد خرید نداریم.

116
00:07:09,390 --> 00:07:14,390
‫بنابراین در اینجا می توانیم بررسی کنیم که آیا طول اقلام سبد خرید برابر با صفر است یا خیر

117
00:07:14,640 --> 00:07:18,183
‫و اگر اینطور باشد، این پاراگراف خروجی خواهد شد.

118
00:07:19,680 --> 00:07:22,560
‫به طور مشابه، اینجا پایین، ما می خواهیم بررسی کنیم

119
00:07:22,560 --> 00:07:25,750
‫اگر طول اقلام سبد خرید بزرگتر از صفر باشد

120
00:07:26,910 --> 00:07:30,570
‫مانند این و فقط این را در لیست ما خروجی بگیرید

121
00:07:30,570 --> 00:07:32,463
‫اگر اینطور باشد

122
00:07:33,750 --> 00:07:37,203
‫بریس مجعد بسته شدن به اینجا می رود.

123
00:07:39,390 --> 00:07:43,110
‫بنابراین، با آن ما اکنون می توانیم این را ذخیره کنیم،

124
00:07:43,110 --> 00:07:48,110
‫به عقب برگردید، دوباره بارگیری کنید و چند مورد را به سبد خرید اضافه کنید

125
00:07:49,290 --> 00:07:53,010
‫و سپس سبد خرید را باز کنید و ما می توانیم آن موارد را در اینجا ببینیم

126
00:07:53,010 --> 00:07:55,740
‫و اکنون می‌توانیم آن موارد را از داخل سبد

127
00:07:55,740 --> 00:07:58,500
‫خرید ویرایش کنیم، حذف کنیم، تعدادشان را

128
00:07:58,500 --> 00:08:03,500
‫افزایش دهیم و همه این کارها را انجام دهیم.

129
00:08:03,510 --> 00:08:06,720
‫و بنابراین، با آن، ما اکنون با موفقیت

130
00:08:06,720 --> 00:08:10,050
‫برنامه‌ای ساختیم که از Redux و البته از

131
00:08:10,050 --> 00:08:13,980
‫TypeScript استفاده می‌کند، زیرا موضوع

132
00:08:13,980 --> 00:08:17,760
‫اصلی این دوره، TypeScript با React است.

133
00:08:17,760 --> 00:08:19,140
‫اما همانطور که می‌توانید

134
00:08:19,140 --> 00:08:22,800
‫بگویید، کار خاصی برای

135
00:08:22,800 --> 00:08:24,840
‫TypeScript وجود نداشت که باید انجام می‌شد.

136
00:08:24,840 --> 00:08:28,800
‫مهمتر از همه، ما مجبور شدیم این
‫types ویژه را راه اندازی کنیم

137
00:08:28,800 --> 00:08:33,330
‫و hooks برای دریافت بهترین پشتیبانی ممکن TypeScript

138
00:08:33,330 --> 00:08:37,020
‫هنگام انتخاب data و ارسال actions.

139
00:08:37,020 --> 00:08:39,720
‫اما این تقریباً تمام بود.

140
00:08:39,720 --> 00:08:42,750
‫مطمئناً، ما statetype خود را نیز در اینجا

141
00:08:42,750 --> 00:08:47,010
‫راه‌اندازی کرده‌ایم و از این PayloadAction type برای

142
00:08:47,010 --> 00:08:50,880
‫دریافت پشتیبانی بهتر TypeScript با آن action استفاده کردیم.

143
00:08:50,880 --> 00:08:55,080
‫اما به غیر از آن، ما واقعاً از Redux استفاده کردیم

144
00:08:55,080 --> 00:08:58,533
‫همانطور که شما از آن در هر پروژه React استفاده می‌کنید.

